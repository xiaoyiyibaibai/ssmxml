!function(t){var e=function(){this.handlers={}};e.prototype={constructor:e,addHandler:function(t,e){"undefined"==typeof this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e)},emit:function(t){var e,n,i;if(t.target||(t.target=this),this.handlers[t.type]instanceof Array)for(e=this.handlers[t.type],n=0,i=e.length;n<i;++n)e[n](t)},removeHandler:function(t,e){var n,i,r;if(this.handlers[t]instanceof Array)for(n=this.handlers[t],i=0,r=n.length;i<r;++i)if("function"==typeof n[i]&&n[i]===e){n.splice(i,1);break}}},t.CJLEvent=new e}(window),function(t,e,n,i){var r,o=function(t){this.__element=t,this.__options={},this.__tagTraceid="data-traceid",this.__tagTracepid="data-tracepid"};o.of=function(t){if(!t instanceof HTMLElement)throw new Error("Ga must need a HTMLElement instance!");return new o(t)},o.prototype={constructor:o,post:function(t,n,i){var r,o=this.getURL(t,n,i);o&&(r=e.createElement("img"),r.setAttribute("src",o),r.setAttribute("style","display:none;"),e.body.appendChild(r),r.addEventListener("load",function(){e.body.removeChild(r)}),r.addEventListener("error",function(){e.body.removeChild(r)}))},getId:function(t){return t.getAttribute(this.__tagTraceid)},getPid:function(t){return t.getAttribute(this.__tagTracepid)},getURL:function(t,e,n){var i,r=this.__options;if(t&&e&&n)return i=r.domain+"/action/trace/record?e=",i+=t,i+="&aid="+e,i+="&p="+n,r.hasOwnProperty("userId")&&(i+="&uid="+r.userId),i},handlers:{pv:function(t){"function"==typeof t.fn&&t.fn()},click:function(t){"function"==typeof t.fn&&t.fn()}},setUp:function(t){if("object"!=typeof t)throw new Error("Ga options must be an Object!");if(!t.hasOwnProperty("domain")&&"string"!=typeof t.domain)throw new Error("Ga options need domain property!");this.__options=t;var e=this.getId(this.__element);return n.addHandler("pv"+e,this.handlers.pv),n.addHandler("click"+e,this.handlers.click),this},watch:function(){var i=this,r=this.__element,o=i.getId(r),a=i.getPid(r),s=function(){i.isElementInViewport(r)&&n.emit({type:"pv"+o,fn:function(){n.removeHandler("pv"+o,i.handlers.pv),i.post("pv",o,a)}})},d=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||i.throttle(s,50);s(),e.addEventListener("scroll",function(){d(s,50)},!1),r.addEventListener("click",function(){n.emit({type:"click"+o,fn:function(){i.post("click",o,a)}})},!1)},throttle:function(t,e,n){var i,r,o,a,s,d,c={now:Date.now||function(){return(new Date).getTime()}},u=0;return n||(n={}),s=function(){u=n.leading===!1?0:c.now(),i=null,a=t.apply(r,o),i||(r=o=null)},d=function(){var d,l=c.now();return u||n.leading!==!1||(u=l),d=e-(l-u),r=this,o=arguments,d<=0||d>e?(i&&(clearTimeout(i),i=null),u=l,a=t.apply(r,o),i||(r=o=null)):i||n.trailing===!1||(i=setTimeout(s,d)),a},d.cancel=function(){clearTimeout(i),u=0,i=r=o=null},d},isElementInViewport:function(n){var i=n.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(t.innerHeight||e.documentElement.clientHeight)&&i.right<=(t.innerWidth||e.documentElement.clientWidth)}},t.Ga=o,r={},"object"==typeof i&&(i.hasOwnProperty("domain")&&"string"==typeof i.domain&&(r.domain="//"+i.domain),i.hasOwnProperty("userId")&&(r.userId=i.userId)),e.querySelectorAll("[data-traceid]").forEach(function(t){o.of(t).setUp(r).watch()})}(window,window.document,CJLEvent,window.__gac);